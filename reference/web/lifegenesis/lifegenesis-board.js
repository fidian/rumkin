"use strict";function _createForOfIteratorHelper(e,t){var r,i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return i&&(e=i),r=0,{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,a=!0,o=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return a=e.done,e},e:function(e){o=!0,n=e},f:function(){try{a||null==i.return||i.return()}finally{if(o)throw n}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var random=require("../../../js/module/random");module.exports=function(){function i(){var e=this;for(_classCallCheck(this,i),this.width=20,this.height=20,this.board=[];this.board.length<this.height;){for(var t=[];t.length<this.width;)t.push(0);this.board.push(t)}for(var r=0;r<10;r+=1)this.randomSplat();this.setSmile(),setInterval(function(){e.updateCells(),random.number()<.4&&e.randomSplat(),m.redraw()},1e3)}return _createClass(i,[{key:"randomSplat",value:function(){for(var e=random.index(this.height),t=random.index(this.width),r=random.index(5);r;){--r;var i=e+random.index(5)-3,n=t+random.index(5)-3;0<=i&&i<this.height&&0<=n&&n<this.width&&(this.board[i][n]=1)}}},{key:"setSmile",value:function(){this.smileLine(4,7,[0,0,0,0,0,0]),this.smileLine(5,6,[0,0,1,0,0,0,0,0]),this.smileLine(6,5,[0,0,0,1,0,0,1,0,0,0]),this.smileLine(7,5,[0,0,0,1,0,0,0,0,0,0]),this.smileLine(8,5,[0,0,0,0,0,0,0,0,0,0]),this.smileLine(9,5,[0,0,0,0,0,0,0,0,0,0]),this.smileLine(10,5,[0,0,0,0,0,0,0,0,0,0]),this.smileLine(11,5,[0,1,0,0,0,0,0,0,1,0]),this.smileLine(12,5,[0,1,1,0,0,0,0,1,1,0]),this.smileLine(13,6,[0,1,1,1,1,1,1,0]),this.smileLine(14,7,[0,0,0,0,0,0])}},{key:"smileLine",value:function(e,t,r){var i,n=t,a=_createForOfIteratorHelper(r);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.board[e][n]=o,n+=1}}catch(e){a.e(e)}finally{a.f()}}},{key:"getNextCellState",value:function(e,t){for(var r=0,i=-1;i<=1;i+=1)for(var n=-1;n<=1;n+=1)(i||n)&&this.isAlive(e+i,t+n)&&(r+=1);return this.isAlive(e,t)?2===r||3===r?2:3:3===r?1:0}},{key:"isAlive",value:function(e,t){if(e<0||e>=this.height||t<0||t>=this.width)return!1;e=this.board[e][t];return 1===e||2===e}},{key:"updateCells",value:function(){for(var e=[],t=0;t<this.height;t+=1){var r=[];e.push(r);for(var i=0;i<this.width;i+=1)r.push(this.getNextCellState(t,i))}this.board=e}},{key:"view",value:function(){return m("div",this.board.map(function(e){return m("div",{class:"row"},e.map(function(e){return m("div",{class:"cell state".concat(e)})}))}))}}]),i}();