<!DOCTYPE html><html lang=en class="H(100%) Ovy(h)"><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Including JavaScript Dynamically</title><script src=../../../js/acss-live.js></script><link rel=stylesheet href=../../../css/reset.css?1717437358547><link rel=stylesheet href=../../../css/fonts.css?1717437358547><link rel=stylesheet href=../../../css/site.css?1717437358547><link rel=apple-touch-icon sizes=180x180 href=../../../img/favicon/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../../img/favicon/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../../img/favicon/favicon-16x16.png><link rel=manifest href=../../../img/favicon/manifest.json><link rel=mask-icon href=../../../img/favicon/safari-pinned-tab.svg color=#5bbad5><link rel="shortcut icon" href=../../../img/favicon/favicon.ico><meta name=msapplication-config content=../../../img/favicon/browserconfig.xml><meta name=theme-color content=#ffffff><link rel=license href=../../../license><script async src="https://www.googletagmanager.com/gtag/js?id=G-H1S197ZSNH"></script><script>window.dataLayer = window.dataLayer || [];
function gtag() { dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'G-H1S197ZSNH');</script></head><body class="H(100%) Ovx(h) Bgc(pageBorderBackground) Bgc(tr)--p"><div class="Maw(1002px) H(100%) W(100%) D(f) Fxd(c) Maw(100%)--p Mx(a) Mx(0)--p"><nav class="Bgc(barBackground) Bgc(tr)--p Pos(a) Pos(s)--p T(0) Start(0) End(0) Bdbw(1px) Bdc(barBorder) H(50px) C(barText) C(black)--p Px(10px) Z(1)"><div class="W(100%) D(f) H(100%) Jc(spb) Ai(c) Ov(h)"><div class="D(f) Whs(nw) Ai(c) Fxs(1) Ov(h) Pend(12px)"><a class="C(barText) C(black)--p Fz(1.4em) Fw(b) Tov(e) Ov(h) Fxs(1) Td(n)--p Tov(e) D(b)" href=../../../ >Rumkin.com </a><span class="Px(0.3em) Fxs(0)">&gt;</span> <a class="C(barText) C(black)--p Fz(1.4em) Fw(b) Tov(e) Ov(h) Fxs(1) Td(n)--p Tov(e) D(b)" href=../../ >Reference Materials </a><span class="Px(0.3em) Fxs(0)">&gt;</span> <a class="C(barText) C(black)--p Fz(1.4em) Fw(b) Tov(e) Ov(h) Fxs(0) Td(n)--p Tov(e) D(b)" href=../ >Web Reference</a></div></div></nav><div class="Bgc(pageBackground) Bgc(tr)--p Fxg(1)"><div class="Mt(50px) Mt(0)--p C(textColorNormal) P(10px)"><div class="Mx(a) W(100%) Maw(contentWidthMax) Maw(100%)--p D(f) Px(10px) Pstart(0)"><main class="D(tbc) Va(t) W(100%)"><header><h1>Including JavaScript Dynamically</h1><div class=Px(20px)><div class="Bgc(#c5e0f9) Bgc(tr)--p Fs(i) Py(4px) Px(8px)">If you have the desire to load JavaScript files dynamically and even know when they have loaded, this page is for you!</div></div></header><div class=contents><p>I wanted a way to make individual files for JavaScript classes and have them automatically load their parents without the web page having to know in advance all of the JavaScript includes that needed to be made.</p><p>I failed. But just for the class inheritance. I did write code that worked in the major browsers, which included JavaScript files dynamically. They also fired onload events so I could tell when everything was finally loaded. Don&#39;t worry, there are other solutions out there, such as RequireJS. Take a look at them if you need some serious on-demand loading of files.</p><p>I used a lot of information from <a href=http://www.phpied.com/javascript-include-ready-onload/ >Stoyan&#39;s blog</a> to make the onload event work.</p><pre><code>var jsIncludeFiles = [];

// Include a JavaScript file.  Functions like include_once per PHP.
function include(file) {
    var htmlElem = document.getElementsByTagName(&#39;head&#39;)[0];
    var js = document.createElement(&#39;script&#39;);

    js.setAttribute(&#39;language&#39;, &#39;JavaScript&#39;);
    js.setAttribute(&#39;type&#39;, &#39;text/javascript&#39;);
    js.setAttribute(&#39;src&#39;, file);

    // On Firefox, js.src is the fully qualified URL, IE it stays verbatim
    if (jsIncludeFiles[js.src]) {
        return;
    }

    // IE
    js.onreadystatechange = function() {
        if (js.readyState == &#39;complete&#39; || js.readyState == &#39;loaded&#39;) {
            includeDone(js);
        }
    }

    if (js.addEventListener) {
        // Everything that supports the DOM2 event model
        // This should cover Firefox, Opera 9.2 and Safari
        js.addEventListener(&#39;load&#39;, includeDone, false);
    } else {
        // This may work for other browsers, such as older Mozilla-based
        // ones and perhaps older Safari versions
        js.onload = includeDone;
    }

    jsIncludeFiles[js.src] = &#39;loading&#39;;

    htmlElem.appendChild(js);
}

// Called when an include file has loaded
function includeDone(thisObj) {
    // IE will pass the script node, Firefox and others pass the Event.
    if (thisObj.target) {
        // Event was passed, pick out the script node
        thisObj = thisObj.target;
    }
    if (jsIncludeFiles[thisObj.src]) {
        jsIncludeFiles[thisObj.src] = &#39;ready&#39;;
    }
    thisObj.parentNode.removeChild(thisObj);
    if (! includeIsLoading()) {
        onloadQueueProcess();
    }
}

function includeIsLoading() {
    for (var file in jsIncludeFiles) {
        if (jsIncludeFiles[file] == &#39;loading&#39;) {
            return true;
        }
    }
    return false;
}
</code></pre><p>This code is freely made available to everyone in case they can use it. It&#39;s under the <a href=../../../license/ >MIT License</a>.</p></div></main></div></div></div><footer class="Bgc(barBackground) Bgc(tr)--p Bdtw(1px) Bdc(barBorder) C(barText) C(black)--p P(10px) D(f) Fxd(c)--p Jc(spb)"><div class=Fz(0.8em)>&copy; Copyright 2024 Tyler Akins &lt;<a class="Td(n)--p C(barText) C(black)--p" href=mailto:fidian@rumkin.com>fidian@rumkin.com</a>&gt;, last build 2024-06-03T17:55:58.547Z</div><div><a class="D(n)--p Fz(0.8em) C(barText)" href=../../../license/ >License</a> | <a class="D(n)--p Fz(0.8em) C(barText)" href=../../../reference/site/legal/ >Legal</a> <a class="D(n) D(b)--p Td(n) Fz(0.8em)" href=../../../license/ >Site content licensed under a MIT license with a non-advertising clause</a></div></footer></div></body></html>