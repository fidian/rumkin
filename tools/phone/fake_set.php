<?PHP

// Make a session ID
$sid = '';

$words = array(
   'a',
   'able',
   'about',
   'above',
   'act',
   'add',
   'after',
   'again',
   'against',
   'age',
   'ago',
   'air',
   'all',
   'also',
   'always',
   'am',
   'among',
   'an',
   'and',
   'animal',
   'answer',
   'any',
   'appear',
   'are',
   'area',
   'as',
   'ask',
   'at',
   'back',
   'base',
   'be',
   'beauty',
   'bed',
   'been',
   'before',
   'began',
   'begin',
   'behind',
   'best',
   'better',
   'between',
   'big',
   'bird',
   'black',
   'blue',
   'boat',
   'body',
   'book',
   'both',
   'box',
   'boy',
   'bring',
   'brought',
   'build',
   'busy',
   'but',
   'by',
   'call',
   'came',
   'can',
   'car',
   'care',
   'carry',
   'cause',
   'center',
   'certain',
   'change',
   'check',
   'children',
   'city',
   'class',
   'clear',
   'close',
   'cold',
   'color',
   'come',
   'common',
   'complete',
   'contain',
   'correct',
   'could',
   'country',
   'course',
   'cover',
   'cross',
   'cry',
   'cut',
   'dark',
   'day',
   'decide',
   'deep',
   'develop',
   'did',
   'differ',
   'direct',
   'do',
   'does',
   'dog',
   'done',
   'door',
   'down',
   'draw',
   'drive',
   'dry',
   'during',
   'each',
   'early',
   'earth',
   'ease',
   'east',
   'eat',
   'end',
   'enough',
   'even',
   'ever',
   'every',
   'example',
   'eye',
   'face',
   'fact',
   'fall',
   'family',
   'far',
   'farm',
   'fast',
   'father',
   'feel',
   'feet',
   'few',
   'field',
   'figure',
   'fill',
   'final',
   'find',
   'fine',
   'fire',
   'first',
   'fish',
   'five',
   'fly',
   'follow',
   'food',
   'foot',
   'for',
   'force',
   'form',
   'found',
   'four',
   'free',
   'friend',
   'from',
   'front',
   'full',
   'game',
   'gave',
   'get',
   'girl',
   'give',
   'go',
   'gold',
   'good',
   'got',
   'govern',
   'great',
   'green',
   'ground',
   'group',
   'grow',
   'had',
   'half',
   'hand',
   'happen',
   'hard',
   'has',
   'have',
   'he',
   'head',
   'hear',
   'heard',
   'heat',
   'help',
   'her',
   'here',
   'high',
   'him',
   'his',
   'hold',
   'home',
   'horse',
   'hot',
   'hour',
   'house',
   'how',
   'hundred',
   'idea',
   'if',
   'in',
   'inch',
   'interest',
   'is',
   'island',
   'it',
   'just',
   'keep',
   'kind',
   'king',
   'knew',
   'know',
   'land',
   'language',
   'large',
   'last',
   'late',
   'laugh',
   'lay',
   'lead',
   'learn',
   'leave',
   'left',
   'less',
   'let',
   'letter',
   'life',
   'light',
   'like',
   'line',
   'list',
   'listen',
   'little',
   'live',
   'long',
   'look',
   'lot',
   'love',
   'low',
   'machine',
   'made',
   'main',
   'make',
   'man',
   'many',
   'map',
   'mark',
   'may',
   'me',
   'mean',
   'measure',
   'men',
   'might',
   'mile',
   'mind',
   'minute',
   'miss',
   'money',
   'moon',
   'more',
   'morning',
   'most',
   'mother',
   'mountain',
   'move',
   'much',
   'music',
   'must',
   'my',
   'name',
   'near',
   'need',
   'never',
   'new',
   'next',
   'night',
   'no',
   'north',
   'note',
   'nothing',
   'notice',
   'noun',
   'now',
   'number',
   'numeral',
   'object',
   'of',
   'off',
   'often',
   'oh',
   'old',
   'on',
   'once',
   'one',
   'only',
   'open',
   'or',
   'order',
   'other',
   'our',
   'out',
   'over',
   'own',
   'page',
   'paper',
   'part',
   'pass',
   'pattern',
   'people',
   'perhaps',
   'person',
   'picture',
   'piece',
   'place',
   'plain',
   'plan',
   'plane',
   'plant',
   'play',
   'point',
   'port',
   'pose',
   'possible',
   'pound',
   'power',
   'press',
   'problem',
   'produce',
   'product',
   'pull',
   'put',
   'question',
   'quick',
   'rain',
   'ran',
   'reach',
   'read',
   'ready',
   'real',
   'record',
   'red',
   'remember',
   'rest',
   'right',
   'river',
   'road',
   'rock',
   'room',
   'round',
   'rule',
   'run',
   'said',
   'same',
   'saw',
   'say',
   'school',
   'science',
   'sea',
   'second',
   'see',
   'seem',
   'self',
   'sentence',
   'serve',
   'set',
   'several',
   'shape',
   'she',
   'ship',
   'short',
   'should',
   'show',
   'side',
   'simple',
   'since',
   'sing',
   'sit',
   'six',
   'size',
   'sleep',
   'slow',
   'small',
   'snow',
   'so',
   'some',
   'song',
   'soon',
   'sound',
   'south',
   'special',
   'spell',
   'stand',
   'star',
   'start',
   'state',
   'stay',
   'step',
   'still',
   'stood',
   'stop',
   'story',
   'street',
   'strong',
   'study',
   'such',
   'sun',
   'sure',
   'surface',
   'table',
   'tail',
   'take',
   'talk',
   'teach',
   'tell',
   'ten',
   'test',
   'than',
   'that',
   'the',
   'their',
   'them',
   'then',
   'there',
   'these',
   'they',
   'thing',
   'think',
   'this',
   'those',
   'though',
   'thought',
   'thousand',
   'three',
   'through',
   'time',
   'to',
   'together',
   'told',
   'too',
   'took',
   'top',
   'toward',
   'town',
   'travel',
   'tree',
   'true',
   'try',
   'turn',
   'two',
   'under',
   'unit',
   'until',
   'up',
   'us',
   'use',
   'usual',
   'very',
   'voice',
   'vowel',
   'wait',
   'walk',
   'want',
   'war',
   'warm',
   'was',
   'watch',
   'water',
   'way',
   'we',
   'week',
   'weight',
   'well',
   'went',
   'were',
   'west',
   'what',
   'wheel',
   'when',
   'where',
   'which',
   'while',
   'white',
   'who',
   'whole',
   'why',
   'will',
   'wind',
   'with',
   'wonder',
   'wood',
   'word',
   'work',
   'world',
   'would',
   'write',
   'year',
   'yes',
   'yet',
   'you',
   'young',
   'your',
);

$name = $words[mt_rand(0, count($words) - 1)] . '-' .
  $words[mt_rand(0, count($words) - 1)] . '-' .
  $words[mt_rand(0, count($words) - 1)];
$name_session = str_replace('-', '', $name);
session_id($name_session);
session_start();

echo "Saving session info.  Use the key ";
echo "<b>$name</b>";
echo " to load the information.";

$s = $_SERVER;

$method = false;
if (isset($s['HTTP_METHOD'])) {
    $method = $s['HTTP_METHOD'];
    unset($s['HTTP_METHOD']);
} else if (isset($s['REQUEST_METHOD'])) {
    $method = $s['REQUEST_METHOD'];
    unset($s['REQUEST_METHOD']);
}

$protocol = false;
if (isset($s['SERVER_PROTOCOL'])) {
    $protocol = $s['SERVER_PROTOCOL'];
    unset($s['SERVER_PROTOCOL']);
}

$uri = false;
if (isset($s['REQUEST_URI'])) {
    $uri = $s['REQUEST_URI'];
    unset($s['REQUEST_URI']);
}

$i = array(
   'method' => $method,
   'uri' => $uri,
   'protocol' => $protocol,
   'headers' => array(),
);

// echo "<br><br>";
// echo "<pre>";
// echo htmlspecialchars("$method $uri $protocol\n");

$extras = array('CONTENT_TYPE', 'CONTENT_LENGTH');

foreach ($s as $k => $v) {
    if (substr($k, 0, 5) == 'HTTP_' || in_array($k, $extras)) {
	$k = preg_replace('/^HTTP_/', '', $k);
	$k = strtolower($k);
	$k = str_replace('_', ' ', $k);
	$k = ucwords($k);
	$k = str_replace(' ', '-', $k);
	$i['headers'][$k] = $v;
	// echo htmlspecialchars("$k: $v\n");
    }
}

$_SESSION['fake_info'] = $i;
