#!/usr/bin/env node
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Parser=require("./parser"),Roller=require("./roller"),parser=new Parser,roller=new Roller,tests=[["1d2",{1:1,2:1}],["2d4-2",{0:1,1:2,2:3,3:4,4:3,5:2,6:1}],["(1d6,1d6)D1",{1:1,2:3,3:5,4:7,5:9,6:11}],["(1d6,1d6)P1",{1:11,2:9,3:7,4:5,5:3,6:1}],["(2d4,1d8+1,1d10)D1P1",{2:54,3:138,4:228,5:300,6:254,7:178,8:96,9:32}]];function compare(e,r){var o=_typeof(e);if(o!==_typeof(r))return!1;if("object"!==o)return e===r;for(var t=new Set(Object.keys(r)),n=0,c=Object.keys(e);n<c.length;n++){var l=c[n];if(!t.has(l))return!1;if(t.delete(l),!compare(e[l],r[l]))return!1}return!t.size}function finalCheck(e,r,o){o=o.rolls.snapshot().map;compare(r,o)?console.log("".concat(e,": pass")):(console.log("".concat(e,": FAIL")),console.log("Expected:",r),console.log("Actual:",o)),runNext()}function confirm(r,o){var e=parser.parse(r);roller.calculate(e,function(e){return finalCheck(r,o,e)},function(){})}function runNext(){var e=tests.shift();e&&confirm(e[0],e[1])}runNext();