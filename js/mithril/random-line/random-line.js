"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var random=require("../../module/random");module.exports=function(){function t(e){var n=this;_classCallCheck(this,t),window.randomLineTriggers.push(function(){n.newFortune()}),this.fortunes=["Loading fortunes"],this.newFortune(),m.request({extract:function(e){return e.responseText},url:e.attrs["text-file"]}).then(function(e){n.fortunes=e.trim().split(/\r?\n|\r/),n.newFortune()},function(){n.fortunes=["Error loading fortunes"],n.newFortune()})}return _createClass(t,[{key:"newFortune",value:function(){var e=random.index(this.fortunes.length);this.fortune=this.fortunes[e]}},{key:"view",value:function(){return m("div",m.trust(this.fortune))}}]),t}();