<!DOCTYPE html><html lang=en class="H(100%) Ovy(h)"><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Escaping in PHP</title><link rel=stylesheet href=../../../../css/reset.css><link rel=stylesheet href=../../../../css/atomic.css><link rel=stylesheet href=../../../../css/fonts.css><link rel=stylesheet href=../../../../css/site.css><link rel=apple-touch-icon sizes=180x180 href=../../../../img/favicon/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../../../img/favicon/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../../../img/favicon/favicon-16x16.png><link rel=manifest href=../../../../img/favicon/manifest.json><link rel=mask-icon href=../../../../img/favicon/safari-pinned-tab.svg color=#5bbad5><link rel="shortcut icon" href=../../../../img/favicon/favicon.ico><meta name=msapplication-config content=../../../../img/favicon/browserconfig.xml><meta name=theme-color content=#ffffff><link rel=license href=../../../../license><script async src="https://www.googletagmanager.com/gtag/js?id=G-H1S197ZSNH"></script><script>window.dataLayer = window.dataLayer || [];
function gtag() { dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'G-H1S197ZSNH');</script></head><body class="H(100%) Ovx(h) Bgc(pageBorderBackground) Bgc(t)--p"><div class="Maw(1002px) H(100%) W(100%) D(f) Fxd(c) Maw(100%)--p Mx(a) Mx(0)--p"><nav class="Bgc(barBackground) Bgc(t)--p Pos(a) Pos(s)--p T(0) Start(0) End(0) Bdbw(1px) Bdc(barBorder) H(50px) C(barText) C(black)--p Px(10px) Z(1)"><div class="W(100%) D(f) H(100%) Jc(sb) Ai(c) Ov(h)"><div class="D(f) Whs(nw) Ai(c) Fxs(1) Ov(h) Pend(12px)"><a class="C(barText) C(black)--p Fz(1.4em) Fw(b) Tov(e) Ov(h) Fxs(1) Td(n)--p Tov(e) D(b)" href=../../../../ >Rumkin.com </a><span class="Px(0.3em) Fxs(0)">&gt;</span> <a class="C(barText) C(black)--p Fz(1.4em) Fw(b) Tov(e) Ov(h) Fxs(1) Td(n)--p Tov(e) D(b)" href=../../../ >Programming Topics </a><span class="Px(0.3em) Fxs(0)">&gt;</span> <a class="C(barText) C(black)--p Fz(1.4em) Fw(b) Tov(e) Ov(h) Fxs(1) Td(n)--p Tov(e) D(b)" href=../../ >Algorithms </a><span class="Px(0.3em) Fxs(0)">&gt;</span> <a class="C(barText) C(black)--p Fz(1.4em) Fw(b) Tov(e) Ov(h) Fxs(0) Td(n)--p Tov(e) D(b)" href=../ >String Escaping and Encoding</a></div></div></nav><div class="Bgc(pageBackground) Bgc(t)--p Fxg(1)"><div class="Mt(50px) Mt(0)--p C(textColorNormal) P(10px)"><div class="Mx(a) W(100%) Maw(contentWidthMax) Maw(100%)--p D(f) Px(10px) Pstart(0)"><main class="D(tbc) Va(t) W(100%)"><header><h1>Escaping in PHP</h1></header><div class=contents><p>I write a lot of PHP code and often have to generate strings for use inside other languages. Instead of continually reinventing the wheel, here&#39;s a page that provides generic solutions.</p><h2 id=php-to-html>PHP to HTML</h2><p>This is built into the language. You may see <code>htmlspecialchars()</code>, but it is now preferred to use <code>htmlentities()</code> to convert a string that is to be embedded in HTML. Here&#39;s how one can use this when you mix HTML and PHP.</p><pre><code>&lt;p&gt;My name is
&lt;?php
    echo htmlentities($name);
?&gt;
&lt;/p&gt;
</code></pre><h2 id=php-to-url>PHP to URL</h2><p>The standard way is to use the built-in function <code>urlencode()</code>. It works well.</p><pre><code>&lt;a href=&quot;/redirect.php?site=&lt;?php
    echo urlencode($url);
?&quot;&gt;Go to the URL you wanted.&lt;/a&gt;
</code></pre><h2 id=php-to-javascript>PHP to JavaScript</h2><p><a href=php-to-js.php.txt>php-to-js.php</a> contains a function that will let you write out a string that is safe to embed into JavaScript. It handles all sorts of escaping as well as worrying about splitting <code>&lt;script&gt;</code> tags.</p><p>To use this glorious function, you need to merely pass it a string and optionally use the <code>$SkipQuotes</code> parameter. Here are a few examples of PHP writing some JavaScript inside of your HTML markup. By default, this will add quotes surrounding the string. If you plan on doing that yourself you can pass <code>true</code> as a second parameter.</p><pre><code>&lt;script&gt;
var myJavaScriptString = &lt;?php
    echo php_to_js($someString)
?&gt;;
var embeddingSomething = &quot;Hello, &lt;?php
    echo php_to_js($name)
?&gt;! How are you?&quot;
&lt;/script&gt;
</code></pre><h2 id=php-to-json>PHP to JSON</h2><p>JSON encoding is very similar to JavaScript. It differs in only a few ways:</p><ul><li>We don&#39;t need to worry about <code>&lt;script&gt;</code> tags.</li><li>Only double-quoted strings are allowed.</li><li>Only properly escaped text is permitted.</li></ul><p>The easy way to convert anything into JSON is with <code>json_encode()</code>, but that will fail you if you try to encode strings that are not UTF encoded. For that reason, you should first detect if the string is in UTF-8. If not, encode it and you now may may safely call <code>json_encode()</code> on the result.</p></div></main></div></div></div><footer class="Bgc(barBackground) Bgc(t)--p Bdtw(1px) Bdc(barBorder) C(barText) C(black)--p P(10px) D(f) Fxd(c)--p Jc(sb)"><div class=Fz(0.8em)>&copy; Copyright 2022 Tyler Akins &lt;<a class="Td(n)--p C(barText) C(black)--p" href=mailto:fidian@rumkin.com>fidian@rumkin.com</a>&gt;, last build 2022-08-10T02:48:54.568Z</div><div><a class="D(n)--p Fz(0.8em) C(barText)" href=../../../../license/ >License</a> | <a class="D(n)--p Fz(0.8em) C(barText)" href=../../../../reference/site/legal/ >Legal</a> <a class="D(n) D(b)--p Td(n) Fz(0.8em)" href=../../../../license/ >Site content licensed under a MIT license with a non-advertising clause</a></div></footer></div></body></html>