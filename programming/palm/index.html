<!DOCTYPE html><html lang=en class="H(100%) Ovy(h)"><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Palm OS Programming</title><script src=../../js/acss-live.js></script><link rel=stylesheet href=../../css/reset.css?1717014395529><link rel=stylesheet href=../../css/fonts.css?1717014395529><link rel=stylesheet href=../../css/site.css?1717014395529><link rel=apple-touch-icon sizes=180x180 href=../../img/favicon/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../img/favicon/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../img/favicon/favicon-16x16.png><link rel=manifest href=../../img/favicon/manifest.json><link rel=mask-icon href=../../img/favicon/safari-pinned-tab.svg color=#5bbad5><link rel="shortcut icon" href=../../img/favicon/favicon.ico><meta name=msapplication-config content=../../img/favicon/browserconfig.xml><meta name=theme-color content=#ffffff><link rel=license href=../../license><script async src="https://www.googletagmanager.com/gtag/js?id=G-H1S197ZSNH"></script><script>window.dataLayer = window.dataLayer || [];
function gtag() { dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'G-H1S197ZSNH');</script></head><body class="H(100%) Ovx(h) Bgc(pageBorderBackground) Bgc(tr)--p"><div class="Maw(1002px) H(100%) W(100%) D(f) Fxd(c) Maw(100%)--p Mx(a) Mx(0)--p"><nav class="Bgc(barBackground) Bgc(tr)--p Pos(a) Pos(s)--p T(0) Start(0) End(0) Bdbw(1px) Bdc(barBorder) H(50px) C(barText) C(black)--p Px(10px) Z(1)"><div class="W(100%) D(f) H(100%) Jc(spb) Ai(c) Ov(h)"><div class="D(f) Whs(nw) Ai(c) Fxs(1) Ov(h) Pend(12px)"><a class="C(barText) C(black)--p Fz(1.4em) Fw(b) Tov(e) Ov(h) Fxs(1) Td(n)--p Tov(e) D(b)" href=../../ >Rumkin.com </a><span class="Px(0.3em) Fxs(0)">&gt;</span> <a class="C(barText) C(black)--p Fz(1.4em) Fw(b) Tov(e) Ov(h) Fxs(0) Td(n)--p Tov(e) D(b)" href=../ >Programming Topics</a></div></div></nav><div class="Bgc(pageBackground) Bgc(tr)--p Fxg(1)"><div class="Mt(50px) Mt(0)--p C(textColorNormal) P(10px)"><div class="Mx(a) W(100%) Maw(contentWidthMax) Maw(100%)--p D(f) Px(10px) Pstart(0)"><main class="D(tbc) Va(t) W(100%)"><header><h1>Palm OS Programming</h1><div class=Px(20px)><div class="Bgc(#c5e0f9) Bgc(tr)--p Fs(i) Py(4px) Px(8px)">This is the older, Palm OS 3.x style of devices. Hints, tips and tricks to get your Palm application working more smoothly.</div></div></header><div class=contents><p>When using these tips, know these facts:</p><ul><li>I program in C. All program code will be in C.</li><li>I use gcc. That shouldn&#39;t be a problem for any of these snippets for you CodeWarrior folk.</li><li>I use Linux, so the shell scripts will be using bash and perl.</li></ul><h2 id=presentations>Presentations</h2><ul><li><p><a href=gotchyas/ >Palm OS Programming Gotchyas and Pitfalls</a> - A slide show converted to text, then to HTML. Easier to print out this way. Lots of good ideas and information is summed up.</p></li><li><p><a href=advanced/ >Advanced UI Topics</a> - A great look at that&#39;s going on inside the palm. Another slide show that was converted to a web page.</p></li></ul><h2 id=pilrc>PilRC</h2><p>If you want to use a scrollbar, the easiest way to get it to be the correct width and height is to put it right after your list, table, or whatever, and refer to the previous top, height, right, etc. Also, you can see with this example that each row in the table is 11 pixels (on low-res devices, ...uh... &quot;units&quot; on new ones) high. So if you need 9 rows, make your table 99 high. This is only with the default font.</p><pre><code>TABLE ID TableID AT (1 18 150 121) ROWS 11 COLUMNS 1 COLUMNWIDTHS 150
SCROLLBAR ID ScrollID AT (PREVRIGHT+2 PREVTOP-1 7 PREVHEIGHT+2)
</code></pre><h2 id=c-code>C Code</h2><p>To save space, you should go against all of the examples for your form&#39;s event loop and return true/false as soon as you know it. It also speeds up your program a <em>very</em> minor amount. Lastly, &#39;if&#39; statements are compiled to a smaller amount of code than a switch/case method.</p><pre><code>// Bad example
Boolean BadFormEventHandler(EventPtr event) {
    Boolean handled = false;
    LocalID id;

    switch (event-&gt;eType) {
        case frmOpenEvent:
            // ... insert code here ...
            handled = true;
            break;

        case ctlSelectEvent:
            id = event-&gt;data.ctlEnter.controlID;

            if (id == Button1_ID) {
                // ... insert code here ...
                handled = true;
            } else if (id == Button2_ID) {
                // ... insert code here ...
                handled = true;
            }
    }

    return handled;
}


// Good example
Boolean GoodFormEventHandler(EventPtr event) {
    LocalID id;

    if (event-&gt;eType == frmOpenEvent) {
        // ... insert code here ...
        return true;
    }

    if (event-&gt;eType == ctlSelectEvent) {
        id = event-&gt;data.ctlEnter.controlID;

        if (id == Button1_ID) {
            // ... insert code here ...
            return true;
        }

        if (id == Button2_ID) {
            // ... insert code here ...
            return true;
        }
    }

    return false;
}
</code></pre><p>Some people will put an &#39;else&#39; right after a &#39;return&#39; statement. This is silly. Not only does it create a larger program, but it could cause errors to spring up. As a general rule of thumb, if you return from an &#39;if&#39; block, don&#39;t use an &#39;else&#39; block.</p><pre><code>// Bad example
if (some_thing == what_you_want) {
    // ... insert code here ...
    return true;
} else {   // &#39;else&#39; is not needed.
    // ... insert code here ...
    return false;
}
// Any code here will never get executed.


// Good example
if (some_thing == what_you_want) {
    // ... insert code here ...
    return true;
}

// Maybe add a comment here so you know that
// this is the &#39;else&#39; portion
// ... insert code here ...
return false;
</code></pre><p>Along the same lines, if you return from the &#39;else&#39; and not the &#39;if&#39; section, rewrite it so that the &#39;else&#39; part is first, then return from the &#39;if&#39; section.</p><pre><code>// Bad
if (A &lt; 0.5) {
    // ... insert &lt; 0.5 code here ...
} else {
    // ... insert &gt;= 0.5 code here ...
    return false;
}

// ... more code here ...
return true;


// Good
if (A &gt;= 0.5) {
    // ... insert &gt;= 0.5 code here ...
    return false;
}

// ... insert &lt; 0.5 code here ...
// ... more code here ...
return true;
</code></pre><p>When initializing large arrays or structs, you should declare them <code>static</code> if they never change. If you don&#39;t, they will be created as dynamic variables, and will possibly not be initialized correctly. This appears to happen when you hit about 64 bytes. Therefore, if you have any lookup tables that you just use to reference information, declare them as <code>static</code>.</p><pre><code>// Good example of my form loading function
typedef struct {
    LocalID formID;
    FormEventHandlerType *handler;
} FormHandlerStruct;

void FormLoadEvent(EventPtr event) {
    LocalID formID;
    FormPtr form;
    int i;
    static FormHandlerStruct FormToHandler[] = {
        { F_StartScreen, StartScreenEventHandler },
        { F_Preferences, PreferencesEventHandler },
        { F_AnotherForm, AnotherFormEventHandler },
        { F_About, AboutFormEventHandler },
        { 0, NULL }
    };

    formID = event-&gt;data.frmLoad.formID;
    form = FrmInitForm(formID);
    FrmSetActiveForm(form);

    for (i = 0; FormToHandler[i].formID != 0; i ++) {
        if (FormToHandler[i].formID == formID) {
            FrmSetEventHandler(form, FormToHandler[i].handler);
            return;
        }
    }

    // If you go this far, you forgot to associate the form handler
    // with the form ID.
}
</code></pre><h2 id=events>Events</h2><pre><code>0 - nil
1 - pen down
2 - pen up
3 - pen move
4 - key down
5 - win enter
6 - win exit
7 - ctl enter
8 - ctl exit
9 - ctl select
A - ctl repeat
B - lst enter
C - lst select
D - lst exit
E - pop select
F - fld enter
10 - fld height changed
11 - fld changed
12 - tbl enter
13 - tbl select
14 - day select
15 - menu
16 - app stop
17 - frm load
18 - frm open
19 - frm goto
1A - frm update
1B - frm save
1C - frm close
1D - frm title enter
1E - frm title select
1F - tbl exit
20 - scl enter
21 - scl exit
22 - scl repeat
23 - tsm confirm
24 - tsm fep button
25 - tsm fep mode
800 - menu cmd bar open
801 - menu open
802 - menu close
803 - frm gadget enter
804 - frm gatdget misc
1000 - first i net lib
1100 - first web lib
6000 - first user event
</code></pre><h2 id=books>Books</h2><p>Palm OS Programming Bible - Fairly good book. I like it. It has tons of examples, and they seem to cover everything. There are minor things that it misses, such as the fact that you should return true if you have a custom draw function for a popup list and you need to set the trigger&#39;s label, but overall it is a good book. The only downfall is that it is quite expensive.</p><p>Palm Programming, The Developer&#39;s Guide (O&#39;Reilly) - First off, let me mention that I don&#39;t like O&#39;Reilly books. Not my style. This book is certainly no exception. It has typographical errors, poor code, and skips over topics that I want information about. If I didn&#39;t buy this book, I could have spent it on something useful ... like gas money.</p><h2 id=off-site-links>Off-Site Links</h2><p><a href=http://www.palmopensource.com/ >PalmOpenSource.com</a> - Software that is not only free, but it also lets you download and modify the source code in order to make improvements. Unfortunately, the site is a bit on the small side and doesn&#39;t have loads and loads of software.</p><p><a href=http://prc-tools.sourceforge.net/ >PRC-Tools</a> - Open source, free compiler for making Palm OS programs. This is the alternative to CodeWarrior, and what I use. I highly recommend it.</p><p><a href=http://pilrc.sourceforge.net/ >PilRC</a> - Pilot resource compiler. If you use PRC-Tools to make programs, you will need pilrc to compile your resources for the program.</p><p><a href=http://www.isaac.cs.berkeley.edu/pilot/GLib/GLib.html>GLib Shared Libraries</a> - When you want to share code between multiple programs, you should make it into a library. This web site explains the benefit of making a GLib style shared library. You make it with gcc and the PRC-Tools package, so you CodeWarrior people are unable to follow this approach.</p></div></main></div></div></div><footer class="Bgc(barBackground) Bgc(tr)--p Bdtw(1px) Bdc(barBorder) C(barText) C(black)--p P(10px) D(f) Fxd(c)--p Jc(spb)"><div class=Fz(0.8em)>&copy; Copyright 2024 Tyler Akins &lt;<a class="Td(n)--p C(barText) C(black)--p" href=mailto:fidian@rumkin.com>fidian@rumkin.com</a>&gt;, last build 2024-05-29T20:26:35.529Z</div><div><a class="D(n)--p Fz(0.8em) C(barText)" href=../../license/ >License</a> | <a class="D(n)--p Fz(0.8em) C(barText)" href=../../reference/site/legal/ >Legal</a> <a class="D(n) D(b)--p Td(n) Fz(0.8em)" href=../../license/ >Site content licensed under a MIT license with a non-advertising clause</a></div></footer></div></body></html>