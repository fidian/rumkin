<p>Tillmann Steinbrecher made a wonderful command-line tool for extracting <code>.tar.gz</code>, <code>.tar</code>, and most <code>.zip</code> files. It is called <a href=http://www.t-st.org/untgz/ >untgz</a> and version 0.95 is the most recent, with that one being released February 17, 1997. One very great thing he did was to release the source code with the tool and put everything under the GPL, version 2.</p><h2 id=features>Features</h2><ul><li>Command-line tool (no GUI, much smaller).</li><li>Executables for various Intel x86 flavors: DOS (really old machines), DOS on 386+ machines (still really old), Win32 for 32-bit Windows (95/98/NT/2000/ME/XP), and a native OS/2 binary.</li><li>Extracts a <code>.gz</code> or <code>.tgz</code> and either decompresses it to the single <code>.tar</code> or to the separate files inside the <code>.tar</code>.</li></ul><p>I was looking for a tiny tool that I would put on my boot disk to extract an archive to a ramdisk so I could install more tools than the single floppy would allow. The method is similar to <a href=http://www.nu2.nu/bootdisk/modboot/ >Bart&#39;s Modular Boot Disk</a>. Originally, I used <code>.zip</code> archives because I found a 50k unzip program. Then I switched to <code>.rar</code> because I located a 26k unrar program. I upgraded my Linux machine and found out that the newer version of rar can&#39;t be decompressed with my unrar file, so I searched the web again for a standard format that I could create on Linux and decompress on DOS. I was very fortunate and found untgz.</p><h2 id=smaller>SMALLER!</h2><p>Since I had the source at my disposal, I felt an overwhelming urge to see how much extra I could strip from this 57k program, especially since I would be using this as a decompression tool only on my boot floppy, where space is at a premium. So, with a &quot;just extract the file&quot; type of mindset, I made the following changes to reduce the size of the program:</p><ul><li>The ability to set the timestamp was removed.</li><li>All of the good output was removed &ndash; If the program did its job, you won&#39;t see a thing.</li><li>Almost all of the error output was removed and just cryptic error messages remain.</li><li>The CRC lookup table was eliminated by adding a tiny amount of code.</li><li>All calls to <code>printf()</code> were replaced with <code>puts()</code>.</li><li>All calls to <code>sscanf()</code> were replaced by a custom function.</li><li>Command-line options were eliminated.</li><li>Code that didn&#39;t actually extract the file was removed.</li><li>Other code was tweaked/optimized in order to save space.</li><li>Zip support was removed because it didn&#39;t actually support zip files; it supported zipped tar files.</li><li>Optimization flags for the compilers were tweaked.</li><li><a href=http://upx.sourceforge.net/ >UPX 1.25</a> was used to compress the programs further.</li></ul><p>In the end, I had a 9k untgz program that only used the 8.3 DOS filename standard, and a 15k executable that supported 32-bit and long filenames. I would say that&#39;s a significant savings! 1/6 the size for the little one, 1/4 the size for the 32-bit version.</p><p>I certainly don&#39;t think that this is a useful all-around tool anymore. However, if you have a specific need for an extremely small program that can extract <code>.tar.gz</code> files, this will work <strong>wonders</strong>&gt; for you! If the program reports an error while decompressing, use the larger version for a more detailed description of what&#39;s going on at that moment.</p><h2 id=tips>Tips</h2><p>Use the original version first! If you have any errors with your <code>.tgz</code> file, you will see more detailed explanations of problems there. If you have no problems, you can then move on to the stripped version.</p><p>To achieve maximum compression and remove the &quot;original filename&quot; from the gzip header, you should use pipes. Pass the data directly to gzip from tar like this:</p><pre><code>tar cvf - data_directory/ | gzip -9 &gt; output.tgz
</code></pre><p>Using <code>tar cvfz</code> instead will use the default compression level (6) and will include more data in the gzip header. We&#39;re only talking about a few bytes here, but that can be enough when you are dealing with a tiny boot disk.</p><h2 id=download>Download</h2><ul><li><a href=untgz095.zip>original version</a> - 57k binaries for DOS, Win32, OS/2. Includes source.</li><li><a href=untgzs095.zip>smaller version</a> - 9k binary for DOS, 15k binary for Win32. Includes source, but large chunks of it were deleted to make the program smaller.</li></ul><h2 id=links>Links</h2><ul><li><a href=http://www.nu2.nu/bootdisk/modboot/ >Bart&#39;s MODBOOT</a> - Modular boot disk that uses a ramdisk and extracts <code>.cab</code> files when booting</li><li><a href=http://www.t-st.org/untgz/ >UNTGZ</a> - Official Site</li><li><a href=http://upx.sourceforge.net/ >UPX</a> - The Ultimate Packer for eXecutables</li></ul>