<!DOCTYPE html><html lang=en class="H(100%) Ovy(h)"><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Email Validation RFC Rules</title><link rel=stylesheet href=../../../css/reset.css?1666655458553><link rel=stylesheet href=../../../css/atomic.css?1666655458553><link rel=stylesheet href=../../../css/fonts.css?1666655458553><link rel=stylesheet href=../../../css/site.css?1666655458553><link rel=apple-touch-icon sizes=180x180 href=../../../img/favicon/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../../img/favicon/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../../img/favicon/favicon-16x16.png><link rel=manifest href=../../../img/favicon/manifest.json><link rel=mask-icon href=../../../img/favicon/safari-pinned-tab.svg color=#5bbad5><link rel="shortcut icon" href=../../../img/favicon/favicon.ico><meta name=msapplication-config content=../../../img/favicon/browserconfig.xml><meta name=theme-color content=#ffffff><link rel=license href=../../../license><script async src="https://www.googletagmanager.com/gtag/js?id=G-H1S197ZSNH"></script><script>window.dataLayer = window.dataLayer || [];
function gtag() { dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'G-H1S197ZSNH');</script></head><body class="H(100%) Ovx(h) Bgc(pageBorderBackground) Bgc(t)--p"><div class="Maw(1002px) H(100%) W(100%) D(f) Fxd(c) Maw(100%)--p Mx(a) Mx(0)--p"><nav class="Bgc(barBackground) Bgc(t)--p Pos(a) Pos(s)--p T(0) Start(0) End(0) Bdbw(1px) Bdc(barBorder) H(50px) C(barText) C(black)--p Px(10px) Z(1)"><div class="W(100%) D(f) H(100%) Jc(sb) Ai(c) Ov(h)"><div class="D(f) Whs(nw) Ai(c) Fxs(1) Ov(h) Pend(12px)"><a class="C(barText) C(black)--p Fz(1.4em) Fw(b) Tov(e) Ov(h) Fxs(1) Td(n)--p Tov(e) D(b)" href=../../../ >Rumkin.com </a><span class="Px(0.3em) Fxs(0)">&gt;</span> <a class="C(barText) C(black)--p Fz(1.4em) Fw(b) Tov(e) Ov(h) Fxs(1) Td(n)--p Tov(e) D(b)" href=../../ >Software Projects </a><span class="Px(0.3em) Fxs(0)">&gt;</span> <a class="C(barText) C(black)--p Fz(1.4em) Fw(b) Tov(e) Ov(h) Fxs(0) Td(n)--p Tov(e) D(b)" href=../ >Email Validation Done Right</a></div></div></nav><div class="Bgc(pageBackground) Bgc(t)--p Fxg(1)"><div class="Mt(50px) Mt(0)--p C(textColorNormal) P(10px)"><div class="Mx(a) W(100%) Maw(contentWidthMax) Maw(100%)--p D(f) Px(10px) Pstart(0)"><main class="D(tbc) Va(t) W(100%)"><header><h1>Email Validation RFC Rules</h1></header><div class=contents><p>These rule govern email addresses. I made sure <a href=../ >my validators</a> were correct by reading through the actual rules governing the internet.</p><h2 id=in-summary>In Summary</h2><p>Just in case you can&#39;t read the odd syntax for the rules and the rest of the RFCs (and I certainly don&#39;t blame you), here are the rules as I interpret them.</p><ul><li>All email addresses are in 7-bit US ASCII. (RFC 2822, section 2.2)</li><li>Email addresses consist of a local part, the <code>@</code> symbol, and the domain. (RFC 2822, section 3.4.1)</li><li>The local part can be unquoted, quoted in its entirety, or quoted on a per-label basis. (RFC 2822, sections 3.4.1 and 4.4)</li><li>Unquoted local parts can consist of TEXT, optionally separated by periods. No periods can start or end the local part. Two periods together is invalid. (RFC 2822, section 3.4.1)</li><li>TEXT can contain alphabetic, numeric, and these symbols: ``!#$%&#39;*+-/=?^_{|}~` (RFC 2822, section 3.4.1)</li><li>The quoted local part starts with a quotation mark, ends with a quotation mark. (RFC 2822, section 3.4.1)</li><li>The contents of a quoted local part can not contain characters 9 (TAB), 10 (LF), 13 (CR), 32 (space), 34 (<code>&quot;</code>), 91-94 (<code>[\]^</code>). (RFC 2822, section 3.4.1)</li><li>If the quoted local part has a backslash, the following character is escaped and must not be 10 (LF), 13 (CR). This supersedes the previous rule, allowing spaces and quotation marks in the email address as long as they are escaped. (RFC 2822, section 3.4.1)</li><li>If an email is using the obsolete quoting on a per-label basis, then the email address consists of unquoted or quoted chunks separated by periods. (RFC 2822, section 4.4)</li><li>The domain can be bracketed or plain. (RFC 2822, section 3.4.1)</li><li>A plain domain consists of labels separated with periods. No period can start or end a domain name. No two periods in succession can be in a domain name. (RFC 1035, section 2.3.4)</li><li>The maximum length of a label is 63 characters. (RFC 1035, section 2.3.4)</li><li>A label may contain hyphens, but no two hyphens in a row. A label must not start nor end with a hyphen. (RFC 1035, section 2.3.4)</li><li>Bracketed domains must start with <code>[</code>, end with <code>]</code>, and must not contain characters 9 (TAB), 10 (LF), 13 (CR), 32 (space), 91-94 (<code>[\]^</code>). (RFC 2822, section 3.4.1)</li><li>The contents of a bracketed domain can have a <code>\</code> precede a character to escape it, and the following character must not be 10 (LF) or 13 (CR). This allows spaces in the domain as long as they are escaped. (RFC2822, section 3.4.1)</li><li>The maximum length of the local part is 64 characters. (RFC 2821, section 4.5.3.1)</li><li>Domains must resolve with either an A or MX record. (RFC 2821, section 3.6)</li><li>The maximum length of a domain must be 255 characters when being transmitted over the wire (for DNS lookups), thus the maximum length of the domain (the normal domain or the contents of the bracketed domain) is 253 characters. (RFC 1034, section 3.1)</li><li>Any domain label can be at most 63 characters long. (RFC 1034, section 2.3.1)</li><li>The maximum length of a &quot;useful&quot; email address is 255 characters. (RFC 2821, section 4.5.3.1)</li><li>The maximum allowable length of an email address is 320 characters. (RFC 3696)</li><li>The top level domain must be all alphabetic. (RFC 3696, section 2)</li></ul><h2 id=rfc-2822>RFC 2822</h2><p>This RFC supersedes RFC 822, which governs email exchange through SMTP.</p><pre><code>addr-spec       =       local-part &quot;@&quot; domain

local-part      =       dot-atom / quoted-string / obs-local-part

domain          =       dot-atom / domain-literal / obs-domain

domain-literal  =       [CFWS] &quot;[&quot; *([FWS] dcontent) [FWS] &quot;]&quot; [CFWS]

dcontent        =       dtext / quoted-pair

dtext           =       NO-WS-CTL /     ; Non white space controls
                        %d33-90 /       ; The rest of the US-ASCII
                        %d94-126        ;  characters not including &quot;[&quot;,
                                        ;  &quot;]&quot;, or &quot;\&quot;

NO-WS-CTL       =       %d1-8 /         ; US-ASCII control characters
                        %d11 /          ;  that do not include the
                        %d12 /          ;  carriage return, line feed,
                        %d14-31 /       ;  and white space characters
                        %d127

quoted-pair     =       (&quot;\&quot; text) / obs-qp

text            =       %d1-9 /         ; Characters excluding CR and LF
                        %d11 /
                        %d12 /
                        %d14-127 /
                        obs-text

FWS             =       ([*WSP CRLF] 1*WSP) /   ; Folding white space
                        obs-FWS

CRLF            =       %d13.10

CFWS            =       *([FWS] comment) (([FWS] comment) / FWS)

comment         =       &quot;(&quot; *([FWS] ccontent) [FWS] &quot;)&quot;

ccontent        =       ctext / quoted-pair / comment

ctext           =       NO-WS-CTL /     ; Non white space controls
                        %d33-39 /       ; The rest of the US-ASCII
                        %d42-91 /       ;  characters not including &quot;(&quot;,
                        %d93-126        ;  &quot;)&quot;, or &quot;\&quot;

dot-atom        =       [CFWS] dot-atom-text [CFWS]

dot-atom-text   =       1*atext *(&quot;.&quot; 1*atext)

atext           =       ALPHA / DIGIT / ; Any character except controls,
                        &quot;!&quot; / &quot;#&quot; /     ;  SP, and specials.
                        &quot;$&quot; / &quot;%&quot; /     ;  Used for atoms
                        &quot;&amp;amp;&quot; / &quot;&#39;&quot; /
                        &quot;*&quot; / &quot;+&quot; /
                        &quot;-&quot; / &quot;/&quot; /
                        &quot;=&quot; / &quot;?&quot; /
                        &quot;^&quot; / &quot;_&quot; /
                        &quot;`&quot; / &quot;{&quot; /
                        &quot;|&quot; / &quot;}&quot; /
                        &quot;~&quot;

ALPHA           =       %x41-5A / %x61-7A   ; A-Z / a-z

DIGIT           =       %x30-39  ; 0-9

quoted-string   =       [CFWS]
                        DQUOTE *([FWS] qcontent) [FWS] DQUOTE
                        [CFWS]

DQUOTE          =       %x22  ; &quot; (Double Quote)

qcontent        =       qtext / quoted-pair

qtext           =       NO-WS-CTL /     ; Non white space controls
                        %d33 /          ; The rest of the US-ASCII
                        %d35-91 /       ;  characters not including &quot;\&quot;
                        %d93-126        ;  or the quote character

obs-local-part  =       word *(&quot;.&quot; word)

obs-domain      =       atom *(&quot;.&quot; atom)

obs-FWS         =       1*WSP *(CRLF 1*WSP)

obs-qp          =       &quot;\&quot; (%d0-127)

obs-text        =       *LF *CR *(obs-char *LF *CR)

CFWS            =       *([FWS] comment) (([FWS] comment) / FWS)

WSP             =       SP / HTAB  ; white space

atom            =       [CFWS] 1*atext [CFWS]

word            =       atom / quoted-string
</code></pre><h2 id=rfc-1035-section-231>RFC 1035, section 2.3.1</h2><p>RFC 1123 relaxed the definition of &quot;label&quot;, reflected below.</p><pre><code>domain          =       subdomain / &quot; &quot;

subdomain       =       *(label &quot;.&quot;) label

label           =       *let-dig-hyp 1*let-dig

let-dig-hyp     =       1*let-dig &quot;-&quot;

let-dig         =       ALPHA / DIGIT
</code></pre><h2 id=rfc-3696>RFC 3696</h2><p>RFC 3696 doesn&#39;t appear to agree with RFC 1034. It appears that one says the maximum domain length is 255 characters and the other says 253 characters when transmitted over the wire. The good news is that the domain portion in the email can have brackets surrounding it, thus making the length 255 characters.</p><h2 id=thats-a-lot>That&#39;s a LOT!</h2><p>Yep. The easiest thing I can do is summarize the rules.</p><ul><li>Email addresses are 7-bit ascii; each character has a value from 1 to 127</li><li>The email has a localpart on the left of an <code>@</code>, the domain on the right. Neither the localpart nor the domain may be empty.</li><li>The localpart must be 64 characters or less.</li><li>The localpart can consist of labels separated by dots but there can not be two successive dots, nor can it start or end with a dot.</li><li>Labels can either be quoted or unquoted.<ul><li>Unquoted labels must have at least one character.<ul><li>This can only contain <code>a-z</code>, <code>A-Z</code>, <code>0-9</code>, or any of ``!#$%&amp;&#39;*+-/=?^_{|}~`.</li></ul></li><li>Quoted labels have a <code>&quot;</code> at the beginning and end.<ul><li>There does not need to be anything between the quotes. (Weird.)</li><li>Tab, CR, LF, &quot;, [, , ^ must not exist in the email address unescaped.</li><li>Only CR and LF can&#39;t be escaped with a \ before the character.</li></ul></li></ul></li><li>The domain can be bracketed, unbracketed, or an IP address..<ul><li>An unbracketed domain consists of labels separated by periods and less than 253 characters. No domain can start with a period, end with a period, or have two successive periods.<ul><li>Labels consist of <code>a-z</code>, <code>A-Z</code>, <code>0-9</code>, or one of ``!#$%&amp;&#39;*+-/=?^_{|}~`.</li><li>Labels must be less than 63 characters.</li><li>Labels must not start with a hyphen, end with a hyphen, or contain two successive hyphens.</li><li>The right-most label must be all alphabetic.</li></ul></li></ul></li><li>A bracketed domain starts with <code>[</code>, ends with <code>]</code> and the contents (after unescaping) must be less than 245 characters.<ul><li>CR, LF, <code>{</code>, <code>}</code>, <code>|</code>, and <code>^</code> are not allowed unescaped.</li><li>If there is a <code>\</code>, any character except CR or LF is allowed.</li><li>Labels must be less than 63 characters.</li><li>Labels must not start with a hyphen, end with a hyphen, or contain two successive hyphens.</li><li>The right-most label must be all alphabetic.</li></ul></li><li>IP addresses can be specified as <code>123.45.67.89</code> or <code>73f0:2bba::0562:0011</code> (IPv4 or IPv6).</li></ul><p>It is not a lot better, but hopefully the rewording can help you understand the rules.</p></div></main></div></div></div><footer class="Bgc(barBackground) Bgc(t)--p Bdtw(1px) Bdc(barBorder) C(barText) C(black)--p P(10px) D(f) Fxd(c)--p Jc(sb)"><div class=Fz(0.8em)>&copy; Copyright 2022 Tyler Akins &lt;<a class="Td(n)--p C(barText) C(black)--p" href=mailto:fidian@rumkin.com>fidian@rumkin.com</a>&gt;, last build 2022-10-24T23:50:58.553Z</div><div><a class="D(n)--p Fz(0.8em) C(barText)" href=../../../license/ >License</a> | <a class="D(n)--p Fz(0.8em) C(barText)" href=../../../reference/site/legal/ >Legal</a> <a class="D(n) D(b)--p Td(n) Fz(0.8em)" href=../../../license/ >Site content licensed under a MIT license with a non-advertising clause</a></div></footer></div></body></html>