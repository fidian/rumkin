<!DOCTYPE html><html lang=en class="H(100%) Ovy(h)"><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>File Transfer Through Terminal</title><script src=../../js/acss-live.js></script><link rel=stylesheet href=../../css/reset.css?1706969066279><link rel=stylesheet href=../../css/fonts.css?1706969066279><link rel=stylesheet href=../../css/site.css?1706969066279><link rel=apple-touch-icon sizes=180x180 href=../../img/favicon/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../img/favicon/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../img/favicon/favicon-16x16.png><link rel=manifest href=../../img/favicon/manifest.json><link rel=mask-icon href=../../img/favicon/safari-pinned-tab.svg color=#5bbad5><link rel="shortcut icon" href=../../img/favicon/favicon.ico><meta name=msapplication-config content=../../img/favicon/browserconfig.xml><meta name=theme-color content=#ffffff><link rel=license href=../../license><script async src="https://www.googletagmanager.com/gtag/js?id=G-H1S197ZSNH"></script><script>window.dataLayer = window.dataLayer || [];
function gtag() { dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'G-H1S197ZSNH');</script></head><body class="H(100%) Ovx(h) Bgc(pageBorderBackground) Bgc(tr)--p"><div class="Maw(1002px) H(100%) W(100%) D(f) Fxd(c) Maw(100%)--p Mx(a) Mx(0)--p"><nav class="Bgc(barBackground) Bgc(tr)--p Pos(a) Pos(s)--p T(0) Start(0) End(0) Bdbw(1px) Bdc(barBorder) H(50px) C(barText) C(black)--p Px(10px) Z(1)"><div class="W(100%) D(f) H(100%) Jc(spb) Ai(c) Ov(h)"><div class="D(f) Whs(nw) Ai(c) Fxs(1) Ov(h) Pend(12px)"><a class="C(barText) C(black)--p Fz(1.4em) Fw(b) Tov(e) Ov(h) Fxs(1) Td(n)--p Tov(e) D(b)" href=../../ >Rumkin.com </a><span class="Px(0.3em) Fxs(0)">&gt;</span> <a class="C(barText) C(black)--p Fz(1.4em) Fw(b) Tov(e) Ov(h) Fxs(0) Td(n)--p Tov(e) D(b)" href=../ >Problems Only Tyler Has</a></div></div></nav><div class="Bgc(pageBackground) Bgc(tr)--p Fxg(1)"><div class="Mt(50px) Mt(0)--p C(textColorNormal) P(10px)"><div class="Mx(a) W(100%) Maw(contentWidthMax) Maw(100%)--p D(f) Px(10px) Pstart(0)"><main class="D(tbc) Va(t) W(100%)"><header><h1>File Transfer Through Terminal</h1><div class=Px(20px)><div class="Bgc(#c5e0f9) Bgc(tr)--p Fs(i) Py(4px) Px(8px)">Sometimes one connects to a terminal through SSH and using SCP / rsync isn't an available option.</div></div></header><div class=contents><p>I use <code>ssh</code> a lot to connect to remote computers. Sometimes I have to connect to a computer that&#39;s hidden, so I <code>ssh</code> into a jump host and <code>ssh</code> again into the destination. While poking around, I may have the urge to download a file to my computer, but that&#39;s not usually easy to do.</p><h2 id=symptoms>Symptoms</h2><ul><li>Unable to copy a file directly from one machine to another even though you are connected through an interactive session, probably through <code>ssh</code> or another terminal.</li><li>User may copy a file to the intermediate host and then separately copy the file to the destination host, but that means the file temporarily is on the intermediate computer. It also is more work.</li></ul><h2 id=causes>Causes</h2><ul><li>Most terminal emulators do not have file transfer abilities built-in through a side data stream.</li></ul><h2 id=solution>Solution</h2><p>The easiest thing to do is to employ additional software on one side or the other. Slightly harder solutions are also presented. All of these work.</p><p>With luck, problem solved.</p><h3 id=zmodem>ZModem</h3><p>This software was used to transfer files over modems, yet is still readily available in package managers. Plus, <code>screen</code> has ZModem support built in.</p><ol><li>Run <code>screen</code>.</li><li>SSH to any remote server.</li><li>Type Control-a and <code>:</code>, then you will get the <code>screen</code> command prompt.</li><li>Type <code>zmodem capture</code>.</li><li>Install <code>lrzsz</code> on the remote server.</li></ol><p>Now you can use <code>sz</code> to send a file to your local computer or <code>rz</code> to receive one. <code>screen</code> will prompt you with a command when it detects the remote computer is using ZModem.</p><p>You should use <code>ssh -e none</code> to disable sequences like <code>~.</code>, which ZModem does not encode.</p><p>If you prefer to avoid <code>screen</code>, you could use <code>zssh</code> to initiate the SSH connection and it will trigger the zmodem commands automatically, just like how <code>screen</code> works.</p><h3 id=base64-encoding>Base64 Encoding</h3><p>The <code>coreutils</code> package includes <code>base64</code>, which encodes any file. The opposite is <code>base64 --decode</code>.</p><ol><li>SSH to any remote server.</li><li>Capture traffic to a log file. This must be supported by your terminal emulator.</li><li>Run <code>base64 my-file</code> to get the encoded file.</li></ol><p>There are alternate encoding methods available, such as <code>uuencode</code> and <code>xxencode</code> as well. Each has their own advantages.</p><h3 id=port-forwarding>Port Forwarding</h3><p>This exposes the SSH port through the intermediate computer.</p><ol><li>Use <code>ssh -L 8022:real-destination-computer:22 user@intermediate-computer</code> to kick off your SSH session. This also opens port <code>8022</code> on your computer. When you connect to that port, it would be a direct connection to the destination.</li><li>Copy files by specifying the port using <code>scp -P 8022 my-file localhost:</code>.</li></ol><p>This solution can still work through multiple relays by exposing a port and repeatedly forwarding it.</p></div></main></div></div></div><footer class="Bgc(barBackground) Bgc(tr)--p Bdtw(1px) Bdc(barBorder) C(barText) C(black)--p P(10px) D(f) Fxd(c)--p Jc(spb)"><div class=Fz(0.8em)>&copy; Copyright 2024 Tyler Akins &lt;<a class="Td(n)--p C(barText) C(black)--p" href=mailto:fidian@rumkin.com>fidian@rumkin.com</a>&gt;, last build 2024-02-03T14:04:26.279Z</div><div><a class="D(n)--p Fz(0.8em) C(barText)" href=../../license/ >License</a> | <a class="D(n)--p Fz(0.8em) C(barText)" href=../../reference/site/legal/ >Legal</a> <a class="D(n) D(b)--p Td(n) Fz(0.8em)" href=../../license/ >Site content licensed under a MIT license with a non-advertising clause</a></div></footer></div></body></html>